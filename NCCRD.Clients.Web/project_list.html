<!DOCTYPE html>
<html lang="en">

<head>
    <script type="text/javascript" src="js/conditional_include_mdbootstrap_headers.js"></script>
    <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="js/conditional_include_knockout.js"></script>
    <script type="text/javascript" src="js/conditional_include_mdbootstrap.js"></script>
</head>

<body>

    <hr />

    <!--Filters-->
    <div class="row">

        <div class="col-md-3" id="filterTitle">
            <label>Title:</label>
            <input id="titleFilter" type="text" style="margin-top:5px" onkeyup="TitleFilterChanged(this.value)" />
        </div>

        <div class="col-md-3" id="filterRegion">
            <label>Region:</label>
            <br />
            <div class="dropdown">
                <button class="btn btn-primary dropdown-toggle" style="width:100%;margin:0px 0px 0px 0px" type="button" id="ddRegion" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Region
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <a class="dropdown-item"></a>
                </div>
            </div>
        </div>

        <div class="col-md-3" id="filterStatus">
            <label>Status:</label>
            <br />
            <div class="dropdown">
                <button class="btn btn-primary dropdown-toggle" style="width:100%;margin:0px 0px 0px 0px" type="button" id="ddStatus" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    All
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" id="projectStatusBindObject" data-bind="foreach: projectStatus">
                    <button class="dropdown-item" data-bind="attr: {id: ProjectStatusId}, text: Value" onclick="StatusFilterSelected(this)"></button>
                </div>
            </div>
        </div>

        <div class="col-md-3" id="filterTypology">
            <label>Typology:</label>
            <br />
            <div class="dropdown">
                <button class="btn btn-primary dropdown-toggle" style="width:100%;margin:0px 0px 0px 0px" type="button" id="ddTypology" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    All
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" id="typologyBindObject" data-bind="foreach: typology">
                    <a class="dropdown-item" data-bind="attr: {id: TypologyID}, text: Value" onclick="TypologyFilterSelected(this)"></a>
                </div>
            </div>
        </div>
    </div>

    <!--<br />-->

    <div class="row">
        <div class="col-md-9"></div>
        <div class="col-md-3">
            <button class="btn btn-success" style="float:right;margin-top:15px;margin-right:0px;margin-left:0px;width:100%" onclick="FilterProjects()">Filter projects</button>
        </div>
    </div>

    <hr />
    <br />

    <div id="projectListBindObject">
        <!-- Project List -->
        <div data-bind="foreach: projects">
            <div class="card">
                <div class="card-body">
                    <h4 class="card-title" data-bind="text: ProjectTitle"></h4>
                    <p class="card-text" data-bind="text: ProjectDescription"></p>
                    <button data-bind="attr: { id: ProjectId}" class="btn btn-primary" data-toggle="modal" data-target="#projectDetailsModal" onclick="load_details(this.id)">View details</button>
                </div>
            </div>
            <br />
        </div>
    </div>

    <!-- Details Modal -->
    <div class="modal fade bottom" id="projectDetailsModal">
        <div class="modal-dialog modal-fluid" style="width:85%;margin:auto">
            <div class="modal-content">
                <div class="modal-body">
                    <div id="project_details">
                        <!-- Content will be loaded dynamically -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="js/project_list.js"></script>
</body>

</html>
